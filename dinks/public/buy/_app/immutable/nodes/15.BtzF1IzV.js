import{g as i}from"../chunks/localStore.svelte.C6oJC2U9.js";import{r}from"../chunks/index.De_1-CT6.js";import{f as p}from"../chunks/fetcher.4lFdTOTx.js";import"../chunks/disclose-version.DrGQ82ci.js";import{p as m,a as c}from"../chunks/runtime.BJTCq859.js";import{D as l}from"../chunks/dink-bg.ByVsrQnm.js";import{C as u}from"../chunks/Container.CvBsLdK3.js";import{o as f}from"../chunks/index-client.XL2RzeVY.js";import{g as y}from"../chunks/entry.CkapZUbK.js";const d=async({url:a,parent:t})=>{var s;await t();const o=i("booking");if(i("courts"),!((s=o==null?void 0:o.court_location)!=null&&s.name))throw r(300,"/buy/play-now");if(!(o!=null&&o.date))throw r(300,"/buy/play-now/date-time");if(!(o!=null&&o.player))throw r(300,"/buy/play-now/choose-players");const{data:e,error:n}=await p("/api/method/dinks.api.create_booking",{method:"POST",body:{...o,pay_at_court:a.searchParams.get("pay_at_court")}});if(n)throw r(300,"/buy/play-now/overview");return{booking:e.booking,p:a.searchParams.get("razorpay_invoice_status")!=="paid"?0:1}},T=Object.freeze(Object.defineProperty({__proto__:null,load:d},Symbol.toStringTag,{value:"Module"}));function j(a,t){m(t,!0),f(()=>{setTimeout(()=>{const o=new URLSearchParams({...t.data,...t.data.p?{p:""}:{}});y("/buy/play-now/your-booking?"+o)},5e3)}),u(a,{children:(o,e)=>{l(o,{class:"absolute left-0 top-0 h-full w-full"})},$$slots:{default:!0}}),c()}export{j as component,T as universal};
