import{f as E}from"../chunks/fetcher.CZw1_Gqt.js";import{g as H,l as z,s as L}from"../chunks/localStore.svelte.PuF6XUUg.js";import{r as Q}from"../chunks/index.DRBTOXdQ.js";import{a as _,t as g}from"../chunks/disclose-version.BnUV2Muc.js";import{p as w,V as X,l as Z,as as F,a8 as G,m as J,U as K,q as R,v as W,X as y,at as Y,au as ee,f as te,w as ae,g as e,h as x,y as oe,i as b,s as M,Q as A,k as v,e as se}from"../chunks/runtime.aayF27iC.js";import{S as re,e as T,i as C}from"../chunks/StepHeader.BXqxq0Gy.js";import{i as le}from"../chunks/lifecycle.SOvc4WYe.js";import{p as ie}from"../chunks/props.CqX_l_5a.js";import{C as de}from"../chunks/calendar.XdaO6xzA.js";import{g as ne}from"../chunks/entry.Cxm_KXad.js";import{D as ce,T as ue}from"../chunks/TimeCard.BWu4XbnY.js";import{C as O}from"../chunks/Container.COIpVhwm.js";import{S as me}from"../chunks/StickyBtn.BW3LnjeA.js";function fe(c,p,m){w&&X();var s=c,r=K,u;Z(()=>{F(r,r=p())&&(u&&G(u),u=J(()=>m(s)))}),w&&(s=R)}const D=["07:00 AM","08:00 AM","09:00 AM","10:00 AM","11:00 AM","12:00 PM","01:00 PM","02:00 PM","03:00 PM","04:00 PM","05:00 PM","06:00 PM","07:00 PM","08:00 PM","09:00 PM","10:00 PM","11:00 PM"],pe=[{court_number:"5",status:"Booked"},{court_number:"4",status:"Available"},{court_number:"3",status:"Available"},{court_number:"2",status:"Available"},{court_number:"1",status:"Available"}],ve=async()=>{var m,s;const c=H("booking");if(!((m=c==null?void 0:c.court_location)!=null&&m.name))throw Q(300,"/buy/play-now");const{data:p=[]}=await E("/api/method/dinks.api.get_next_30_days?court_name="+((s=c.court_location)==null?void 0:s.name));return{dateOptions:p.map(r=>{const u=r.courts||pe;return u.sort((l,i)=>Number(l.court_number)-Number(i.court_number)),{...r,courts:u}})}},je=Object.freeze(Object.defineProperty({__proto__:null,load:ve},Symbol.toStringTag,{value:"Module"}));var _e=g('<h4 class="mb-4 flex items-center justify-center gap-1 text-base font-bold"><!> Datetime</h4>'),be=g('<div class="flex gap-5 overflow-x-auto scrollbar-sm scrollbar pb-2 h-[73.54px]"></div>'),ge=g('<div class="grid grid-cols-3 gap-2"></div>'),he=g('<div class="flex items-center justify-center p-5 bg-[#C6E5BA] rounded-xl"><!></div>'),ye=g('<div class="flex flex-col gap-[40px]"><!> <!> <!></div> <!>',1);function Ie(c,p){W(p,!1);const m=y();let s=ie(p,"data",8);console.log("Hello from play-now page",s());let r=z("booking",{});const u=t=>{var d;v(l,t);const n=((d=s().dateOptions.find(o=>o.date===e(l)))==null?void 0:d.schedules)||[],a=D.find(o=>!n.find(f=>f.time===o))||"";n.find(o=>o.time===e(i))?v(i,a):e(i)||v(i,a)};let l=y(r.value.date||""),i=y(r.value.time||"");const B=()=>{const t=s().dateOptions.find(n=>n.date===e(l));console.log("selectedSchedule",t==null?void 0:t.schedules,e(i)),console.log("dateOption",t),t&&e(i)&&(L("courts",t.courts||[]),r.value.date=t.date,r.value.day=t.day,r.value.weekday=t.weekday,r.value.time=e(i),ne("/buy/play-now/choose-court"))};Y(()=>(se(s()),e(l)),()=>{v(m,D.map(t=>{var a,d;const n=!!((d=(a=s().dateOptions.find(o=>o.date===e(l)))==null?void 0:a.schedules)!=null&&d.find(o=>o.time===t));return{time:t,disabled:e(l)?n:!0}}))}),ee(),le();var S=ye(),h=te(S),P=x(h);re(P,{backUrl:"/buy/play-now",headerText:"where would you like to play?",children:(t,n)=>{var a=_e(),d=x(a);de(d),oe(),b(a),_(t,a)},$$slots:{default:!0}});var k=M(P,2);O(k,{children:(t,n)=>{var a=be();T(a,5,()=>s().dateOptions,C,(d,o)=>{ce(d,{get dateOption(){return e(o)},onSelect:u,get selected(){return e(l)},set selected(f){v(l,f)},$$legacy:!0})}),b(a),_(t,a)},$$slots:{default:!0}});var j=M(k,2);O(j,{children:(t,n)=>{var a=he(),d=x(a);fe(d,()=>e(l),o=>{var f=ge();T(f,5,()=>e(m),C,(q,$)=>{var U=A(()=>({time:e($).time,courts:[]}));ue(q,{get schedule(){return e(U)},get selected(){return e(i)},set selected(V){v(i,V)},get disabled(){return e($).disabled},$$legacy:!0})}),b(f),_(o,f)}),b(a),_(t,a)},$$slots:{default:!0}}),b(h);var I=M(h,2),N=A(()=>!(e(i)&&e(l)));me(I,{get disabled(){return e(N)},btnText:"Choose Date and Time",action:B}),_(c,S),ae()}export{Ie as component,je as universal};
